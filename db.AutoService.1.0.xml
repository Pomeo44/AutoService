<?xml version="1.0" encoding="UTF-8"?>
  <!--db.changelog.xml-->
<databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">
    
	<changeSet id="20151013-001" author ="aantipin">
      <createTable tableName="MASTER">
        <column name="MASTER_ID" type="int" autoIncrement="true" remarks="ID мастера">
			<constraints primaryKey="true" nullable="false" />
        </column>
        <column name="NAME" type="varchar(100)">
          <constraints nullable="false" />
        </column>
      </createTable>
    </changeSet>
	
	<changeSet id="20151013-002" author ="aantipin">
      <createTable tableName="SPECIALIZATION">
        <column name="SPECIALIZATION_ID" type="int" autoIncrement="true">
			<constraints primaryKey="true" nullable="false" />
        </column>
        <column name="NAME" type="varchar(100)">
          <constraints nullable="false" />
        </column>
      </createTable>
    </changeSet>
	
	<changeSet id="20151013-003" author ="aantipin">
      <createTable tableName="MASTER_SPECIALIZATION">
        <column name="MASTER_SPECIALIZATION_ID" type="int" autoIncrement="true">
			<constraints primaryKey="true" nullable="false" />
        </column>
		<column name="MASTER_ID" type="int">
			<constraints nullable="false" />
        </column>
        <column name="SPECIALIZATION_ID" type="int">
			<constraints nullable="false" />
        </column>
      </createTable>
    </changeSet>
	
	<changeSet id="20151013-004" author ="aantipin">
		<addForeignKeyConstraint baseTableName="MASTER_SPECIALIZATION" baseColumnNames="MASTER_ID" constraintName="MASTER_SPECIALIZATION_MASTER_ID" referencedColumnNames="MASTER_ID" referencedTableName="MASTER"/>
	</changeSet>
	
	<changeSet id="20151013-005" author ="aantipin">
		<addForeignKeyConstraint baseTableName="MASTER_SPECIALIZATION" baseColumnNames="SPECIALIZATION_ID" constraintName="MASTER_SPECIALIZATION_SPECIALIZATION_ID" referencedColumnNames="SPECIALIZATION_ID" referencedTableName="SPECIALIZATION"/>
	</changeSet>
	
	<changeSet id="20151013-006" author ="aantipin">
      <createTable tableName="AUTO_MARKA">
        <column name="AUTO_MARKA_ID" type="int" autoIncrement="true">
			<constraints primaryKey="true" nullable="false" />
        </column>
        <column name="NAME" type="varchar(100)">
          <constraints nullable="false" />
        </column>
      </createTable>
    </changeSet>
	
	<changeSet id="20151013-007" author ="aantipin">
      <createTable tableName="AUTO_MODEL">
        <column name="AUTO_MODEL_ID" type="int" autoIncrement="true">
			<constraints primaryKey="true" nullable="false" />
        </column>
        <column name="NAME" type="varchar(100)">
          <constraints nullable="false" />
        </column>
      </createTable>
    </changeSet>
	
	<changeSet id="20151013-008" author ="aantipin">
      <createTable tableName="AUTO_MARKA_MODEL">
        <column name="AUTO_MARKA_MODEL_ID" type="int" autoIncrement="true">
			<constraints primaryKey="true" nullable="false" />
        </column>
        <column name="AUTO_MARKA_ID" type="int">
			<constraints nullable="false" />
        </column>
        <column name="AUTO_MODEL_ID" type="int">
			<constraints nullable="false" />
        </column>
      </createTable>
    </changeSet>
	
	<changeSet id="20151013-009" author ="aantipin">
		<addForeignKeyConstraint baseTableName="AUTO_MARKA_MODEL" baseColumnNames="AUTO_MARKA_ID" constraintName="AUTO_MARKA_MODEL_MARKA_ID" referencedColumnNames="AUTO_MARKA_ID" referencedTableName="AUTO_MARKA"/>
	</changeSet>
	
	<changeSet id="20151013-010" author ="aantipin">
		<addForeignKeyConstraint baseTableName="AUTO_MARKA_MODEL" baseColumnNames="AUTO_MODEL_ID" constraintName="AUTO_MARKA_MODEL_MODEL_ID" referencedColumnNames="AUTO_MODEL_ID" referencedTableName="AUTO_MODEL"/>
	</changeSet>

    <changeSet id="20151013-011" author ="aantipin">
        <createTable tableName="OWNER_AUTO">
            <column name="OWNER_AUTO_ID" type="int" autoIncrement="true">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="NAME" type="varchar(100)">
                <constraints nullable="false" />
            </column>
            <column name="AUTO_MARKA_MODEL_ID" type="int">
                <constraints nullable="false" />
            </column>
        </createTable>
    </changeSet>

    <changeSet id="20151013-012" author ="aantipin">
        <addForeignKeyConstraint baseTableName="OWNER_AUTO" baseColumnNames="OWNER_AUTO_ID" constraintName="OWNER_AUTO_AUTO_MARKA_MODEL_ID" referencedColumnNames="AUTO_MARKA_MODEL_ID" referencedTableName="AUTO_MARKA_MODEL"/>
    </changeSet>

    <changeSet id="20151013-013" author ="aantipin">
        <createTable tableName="WORK_TYPE">
            <column name="WORK_TYPE_ID" type="int" autoIncrement="true">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="NAME" type="varchar(100)">
                <constraints nullable="false" />
            </column>
        </createTable>
    </changeSet>

    <changeSet id="20151013-014" author ="aantipin">
        <createTable tableName="AUTO_TYPE">
            <column name="AUTO_TYPE_ID" type="int" autoIncrement="true">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="NAME" type="varchar(100)">
                <constraints nullable="false" />
            </column>
        </createTable>
    </changeSet>

    <changeSet id="20151013-015" author ="aantipin">
        <addColumn tableName="AUTO_MARKA_MODEL">
            <column name="AUTO_TYPE_ID" type="int"/>

        </addColumn>
    </changeSet>

    <changeSet id="20151013-016" author ="aantipin">
        <addForeignKeyConstraint baseTableName="AUTO_MARKA_MODEL" baseColumnNames="AUTO_TYPE_ID" constraintName="AUTO_MARKA_MODEL_AUTO_TYPE_ID" referencedColumnNames="AUTO_TYPE_ID" referencedTableName="AUTO_TYPE"/>
    </changeSet>

    <changeSet id="20151013-017" author ="aantipin">
        <createTable tableName="PRICE">
            <column name="PRICE_ID" type="int" autoIncrement="true">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="AUTO_TYPE_ID" type="int">
                <constraints nullable="false" />
            </column>
            <column name="WORK_TYPE_ID" type="int">
                <constraints nullable="false" />
            </column>
            <column name="TIME" type="int">
                <constraints nullable="false" />
            </column>
            <column name="MONEY" type="int">
                <constraints nullable="false" />
            </column>
        </createTable>
    </changeSet>

    <changeSet id="20151013-018" author ="aantipin">
        <addForeignKeyConstraint baseTableName="PRICE" baseColumnNames="AUTO_TYPE_ID" constraintName="PRICE_AUTO_TYPE_ID" referencedColumnNames="AUTO_TYPE_ID" referencedTableName="AUTO_TYPE"/>
    </changeSet>

    <changeSet id="20151013-019" author ="aantipin">
        <addForeignKeyConstraint baseTableName="PRICE" baseColumnNames="WORK_TYPE_ID" constraintName="PRICE_WORK_TYPE_ID" referencedColumnNames="WORK_TYPE_ID" referencedTableName="WORK_TYPE"/>
    </changeSet>




	
</databaseChangeLog>
